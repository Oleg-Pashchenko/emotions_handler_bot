<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–ª—è —Å–æ—á–Ω–æ–π</title>
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap/dist/css/bootstrap.min.css">
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
        <a href='/' class="navbar-brand" href="#">–î–ª—è c–æ—á–Ω–æ–π <span id="heart">c</span> <span id="heart2">‚ù§Ô∏è</span></a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <form class="d-flex pt-3">
                <input class="form-control me-2" type="search" placeholder="–ò—Å—Ç–æ—Ä–∏—è –∏–ª–∏ –±–ª–æ–≥" aria-label="–ü–æ–∏—Å–∫">
                <button class="btn btn-outline-success" type="submit">–ù–∞–π—Ç–∏</button>
            </form>
        </div>
    </div>
</nav>

<div class="container mt-4">
    <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–∞–π—Ç–∞ –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
    <div class="alert alert-warning" role="alert">
        {{citate}}
    </div>
    <div id="search-results" class="container  mt-1 mb-3">
        <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ -->
    </div>

    {% block content %}
    {% endblock %}
</div>

<!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Bootstrap JS –∏ jQuery (–Ω–µ–æ–±—Ö–æ–¥–∏–º—ã –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ Bootstrap) -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap/dist/js/bootstrap.min.js"></script>

<script>
    // –ñ–¥–µ–º 2 —Å–µ–∫—É–Ω–¥—ã –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    $(document).ready(function () {
        setTimeout(function () {
            // –ò–∑–º–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç –∏ –¥–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é
            $("#heart").html('<span class="animated-heart">–±–µ–∑</span>');
            $("#heart2").html('<span class="animated-heart">üñ§</span>');

        }, 2000);
    });
</script>
<script>
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ POST-–∑–∞–ø—Ä–æ—Å–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    function search() {
        var searchTerm = document.querySelector('input[type="search"]').value;
        var searchResultsContainer = document.getElementById('search-results');

        // –û—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        searchResultsContainer.innerHTML = '';

        // –û—Ç–ø—Ä–∞–≤–∏—Ç—å POST-–∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
        $.ajax({
            type: 'POST',
            url: '/get-preview', // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à URL
            data: { search: searchTerm },
            success: function (data) {
                if (data && data.length > 0) {
                    var heading = document.createElement('h3');
                    heading.innerHTML = '–ù–∞–π–¥–µ–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:';
                    searchResultsContainer.appendChild(heading);
                    // –ï—Å–ª–∏ –µ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∏—Ö
                    data.forEach(function (result) {
                        var link = document.createElement('a');
                        link.href = result.link;
                        link.innerText = result.text;

                        var resultItem = document.createElement('div');
                        resultItem.appendChild(link);

                        searchResultsContainer.appendChild(resultItem);
                    });
                } else {
                    // –ï—Å–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–µ—Ç, –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
                    searchResultsContainer.innerHTML = '–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É.';
                }
            },
            error: function () {
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, –µ—Å–ª–∏ –Ω–µ —É–¥–∞–µ—Ç—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å
                searchResultsContainer.innerHTML = '–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–∞.';
            }
        });
    }

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã –ø–æ–∏—Å–∫–∞
    $('form.d-flex').submit(function (e) {
        e.preventDefault(); // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É —Ñ–æ—Ä–º—ã
        search(); // –í—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–∏—Å–∫–∞
    });
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–ª–∞—Å—Å–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ form –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ —ç–∫—Ä–∞–Ω–∞
    function updateFormClass() {
        var windowWidth = $(window).width(); // –ü–æ–ª—É—á–∞–µ–º —à–∏—Ä–∏–Ω—É –æ–∫–Ω–∞
        var form = $("form.d-flex"); // –í—ã–±–∏—Ä–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç form —Å –∫–ª–∞—Å—Å–æ–º d-flex

        if (windowWidth > 900) {
            // –ï—Å–ª–∏ —à–∏—Ä–∏–Ω–∞ –æ–∫–Ω–∞ –±–æ–ª—å—à–µ 900 –ø–∏–∫—Å–µ–ª–µ–π, —É–¥–∞–ª—è–µ–º –∫–ª–∞—Å—Å pt-3
            form.removeClass("pt-3");

        } else {
            // –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –¥–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å pt-3, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
            form.addClass("pt-3");
        }
    }

    // –í—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
    updateFormClass();
    $(window).resize(updateFormClass);
</script>

</body>
</html>
